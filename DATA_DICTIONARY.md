# FracFocus Data Dictionary

## Overview
This document describes all fields in the FracFocus dataset and calculated fields generated by this analysis tool.

## Source Data Fields (FracFocus Registry)

### Identification Fields

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `DisclosureId` | String | Unique identifier for each frac job disclosure | One job may have multiple rows (one per chemical) |
| `APINumber` | String | API well number - unique identifier for each well | Standard 10-14 digit well identifier |
| `JobNumber` | String | Company-assigned job identifier | May not be unique across operators |

### Location Fields

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `StateName` | String | State where well is located | Full state name (e.g., "Texas", not "TX") |
| `CountyName` | String | County where well is located | Used for basin assignment |
| `Latitude` | Float | Well surface location latitude | Decimal degrees |
| `Longitude` | Float | Well surface location longitude | Decimal degrees |
| `Projection` | String | Coordinate system used | Usually NAD27 or NAD83 |

### Temporal Fields

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `JobStartDate` | Date | Start date of fracturing operations | Format: YYYY-MM-DD or MM/DD/YYYY |
| `JobEndDate` | Date | End date of fracturing operations | Typically 3-5 days after start; occasionally longer |

### Well Characteristics

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `OperatorName` | String | Operating company name | May vary in spelling/format |
| `WellName` | String | Well name assigned by operator | Not standardized |
| `TVD` | Float | True vertical depth (feet) | Total measured depth to bottom of well |
| `TotalBaseWaterVolume` | Float | Total water used in frac job (gallons) | **Critical field** for proppant calculation |

### Chemical/Ingredient Fields

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `Purpose` | String | Ingredient category | Values: "Proppant", "Acid", "Surfactant", etc. |
| `IngredientName` | String | Commercial or chemical name | Multiple proppant types possible (sand, ceramic, etc.) |
| `CASNumber` | String | Chemical Abstracts Service registry number | Unique chemical identifier |
| `PercentHFJob` | Float | Ingredient as % of total fluid by mass | **Critical field** for proppant calculation |
| `MassIngredient` | Float | Ingredient mass in pounds | Often missing or inconsistent; used for validation |
| `IngredientComment` | String | Additional ingredient notes | Free text field |
| `TradeName` | String | Commercial product name | May indicate proprietary blends |
| `Supplier` | String | Ingredient supplier | Company providing the material |

### Disclosure Metadata

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `FracturingFluidPurpose` | String | Purpose of the frac job | Usually "Production" |
| `IsWater` | Boolean | Whether ingredient is water | Not consistently populated |
| `FFVersion` | String | FracFocus format version | "1.0" (header only), "2.0", "3.0", "4.0" |
| `SystemApproach` | String | FracFocus reporting approach | "EB" (element-by-element) or "IB" (ingredient-based) |

## Calculated Fields (Generated by Analysis Tool)

### Phase 3: Proppant Calculations

| Field | Type | Description | Calculation |
|-------|------|-------------|-------------|
| `Proppant_lbs` | Float | Total proppant mass per disclosure (pounds) | `(ΣProppant_PercentHFJob / 100) × TotalBaseWaterVolume × 8.34` |
| `JobDurationDays` | Integer | Duration of frac job in days | `(JobEndDate - JobStartDate).days` |

### Phase 4: Quarterly Attribution

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `Quarter` | String | Quarter to which proppant is attributed | Format: "2023Q4" |
| `Outlier_LongJob` | Boolean | Flag for jobs > 365 days | Likely data entry errors |

### Phase 5: Regional Aggregation

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `Basin` | String | Major basin classification | "Permian Basin", "Eagle Ford", "Other", etc. |

### Phase 6: Aggregated Metrics

| Field | Type | Description | Calculation |
|-------|------|-------------|-------------|
| `Proppant_MM_lbs` | Float | Proppant in millions of pounds | `Proppant_lbs / 1,000,000` |
| `Water_MM_gal` | Float | Water in millions of gallons | `Water_gal / 1,000,000` |
| `Well_count` | Integer | Number of unique disclosures | Count of unique `DisclosureId` |
| `Avg_Proppant_per_Well_lbs` | Float | Average proppant per well (pounds) | `Proppant_lbs / Well_count` |
| `Avg_Water_per_Well_gal` | Float | Average water per well (gallons) | `Water_gal / Well_count` |

### Phase 7: Validation Flags

| Field | Type | Description | Notes |
|-------|------|-------------|-------|
| `Flag_ImpossibleProppant` | Boolean | Proppant > 80% of water mass | Physically impossible; data quality issue |
| `MultipleProppantTypes` | Boolean | Disclosure uses multiple proppant types | e.g., both sand and ceramic |

## Output Files

### quarterly_by_basin.csv
Aggregated data by quarter and basin.

**Columns:**
- `Quarter` (String): Time period (e.g., "2023Q4")
- `Basin` (String): Basin name
- `Proppant_lbs` (Float): Total proppant in pounds
- `Water_gal` (Float): Total water in gallons
- `Well_count` (Integer): Number of wells
- `Proppant_MM_lbs` (Float): Proppant in millions of pounds
- `Water_MM_gal` (Float): Water in millions of gallons
- `Avg_Proppant_per_Well_lbs` (Float): Average proppant per well
- `Avg_Water_per_Well_gal` (Float): Average water per well

**Primary Use Cases:**
- Basin-level trend analysis
- Comparing activity across major producing regions
- Identifying basin-specific seasonality

### quarterly_by_state.csv
Aggregated data by quarter and state.

**Columns:** Same as `quarterly_by_basin.csv`, with `StateName` instead of `Basin`

**Primary Use Cases:**
- State-level regulatory analysis
- State production trends
- Multi-state operator analysis

### quarterly_by_county.csv
Aggregated data by quarter, state, and county.

**Columns:** Same as `quarterly_by_basin.csv`, with `StateName` and `CountyName`

**Primary Use Cases:**
- Granular geographic analysis
- County-level economic impact studies
- Local supply chain planning

### permian_by_county.csv
Permian Basin data aggregated by quarter and county.

**Columns:** Same as `quarterly_by_county.csv`, filtered to Permian Basin counties only

**Primary Use Cases:**
- AESI supply chain analysis (Permian-focused)
- County-level demand forecasting within Permian
- Identifying hotspot counties

### quarterly_detail.csv
Disclosure-level data with quarterly attribution.

**Columns:**
- All calculated fields from Phases 3-5
- One row per disclosure-quarter combination (multi-quarter jobs have multiple rows)

**Primary Use Cases:**
- Detailed analysis requiring disclosure-level data
- Custom aggregations not provided in summary files
- Data quality investigation

### validation_report.txt
Text report of data quality issues found during validation.

**Sections:**
- **CRITICAL**: Issues requiring immediate attention
- **WARNINGS**: Potential data quality concerns
- **INFO**: Informational notices about data characteristics

**Primary Use Cases:**
- Understanding data quality limitations
- Identifying outliers for exclusion
- Documenting analysis assumptions

## Data Quality Notes

### Known Issues

1. **Missing MassIngredient**: ~50%+ of disclosures don't report ingredient mass
2. **Outlier Water Volumes**: Some disclosures report >50M gallons (likely errors)
3. **Negative Percentages**: Occasionally PercentHFJob < 0
4. **Date Errors**: Some jobs report durations >1 year (impossible for frac jobs)
5. **Proppant > Water**: ~2,000 disclosures report proppant mass > water mass

### Cleaning Applied

1. **Outlier Removal**:
   - Water volumes >50M gallons excluded
   - TVD >50,000 feet excluded

2. **Date Handling**:
   - Negative durations (end < start) excluded
   - Future dates flagged but retained

3. **Missing Data**:
   - Rows without `JobStartDate`, `JobEndDate`, or `TotalBaseWaterVolume` excluded
   - Missing `PercentHFJob` treated as 0%

4. **Duplicates**:
   - Duplicate `DisclosureId` values → keep first occurrence only

## Calculation Methodology

### Proppant Calculation

**Primary Method (Method B from specifications):**

```
Proppant_lbs = (ΣProppant_PercentHFJob / 100) × TotalBaseWaterVolume × 8.34 lbs/gal
```

**Where:**
- `ΣProppant_PercentHFJob` = Sum of all rows where `Purpose` contains "Proppant"
- `TotalBaseWaterVolume` = Total water volume in gallons (constant per disclosure)
- `8.34 lbs/gal` = Density of water at standard conditions

**Assumptions:**
- `PercentHFJob` is by **mass**, not volume
- Frac fluid density ≈ water density (conservative assumption)
- All proppant rows in a disclosure are summed

**Validation:**
- Compare against `MassIngredient` when available
- Flag discrepancies >20%

### Quarterly Attribution

**Business Logic:**
- Proppant is delivered **just-in-time** (not stockpiled)
- Revenue recognition occurs when proppant is delivered/consumed
- Short jobs (<45 days): All proppant delivered at job start
- Long jobs (>45 days): Proppant delivered proportionally throughout job

**Rules:**

| Job Duration | Attribution Method | Example |
|--------------|-------------------|---------|
| 0-45 days | 100% to start quarter | 5-day job starting Dec 20, 2023 → 100% to Q4 2023 |
| 46-365 days | Proportional by days in each quarter | 60-day job from Dec 15, 2023 to Feb 13, 2024 → ~26% Q4 2023, ~74% Q1 2024 |
| >365 days | Flag for review | Likely data error |

### Basin Assignment

**Method:**
- Match `(StateName, CountyName)` against `basin_definitions.json`
- Exact string match required (case-sensitive)
- Unmatched counties assigned to "Other"

**Limitations:**
- Counties with multiple producing formations may be assigned to single basin
- Basin boundaries are approximate and based on primary production
- User can edit `basin_definitions.json` to refine mappings

## Units Reference

| Metric | Unit | Conversion |
|--------|------|------------|
| Proppant Mass | pounds (lbs) | 1 ton = 2,000 lbs |
| Water Volume | gallons (gal) | 1 barrel = 42 gallons |
| Depth | feet (ft) | 1 mile = 5,280 ft |
| Distance | miles | 1 mile = 1.60934 km |
| Density | lbs/gallon | Water ≈ 8.34 lbs/gal |

## Changelog

### Version 1.0 (2026-01-21)
- Initial release
- Phases 1-7 implemented
- Basin definitions for 9 major basins
- Validation and edge case handling

## Support

For questions about field definitions or data quality, refer to:
- FracFocus official documentation: https://fracfocus.org
- This project's README.md
- validation_report.txt (generated after analysis)
